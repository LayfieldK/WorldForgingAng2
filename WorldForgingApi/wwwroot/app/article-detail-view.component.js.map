{"version":3,"sources":["article-detail-view.component.ts"],"names":["ArticleDetailViewComponent","authService","articleService","router","activatedRoute","this","prototype","ngOnInit","_this","params","map","do","id","console","log","navigate","filter","switchMap","get","subscribe","article","onArticleDetailEdit","Id","onBack","__decorate","core_1","Component","selector","template","styles","exports_1"],"mappings":"2oCA0CAA,2BAAA,WAGI,QAAAA,4BACYC,YACAC,eACAC,OACAC,gBAHAC,KAAAJ,YAAAA,YACAI,KAAAH,eAAAA,eACAG,KAAAF,OAAAA,OACAE,KAAAD,eAAAA,eAoChB,MAlCIJ,4BAAAM,UAAAC,SAAA,WAAA,GAAAC,OAAAH,IAEIA,MAAKD,eAAeK,OACfC,IAAI,SAAAD,QAAU,OAACA,OAAW,KAC1BE,GAAG,SAAAC,IACAC,QAAQC,IAAIF,IACRA,GACAC,QAAQC,IAAIF,IACE,IAAPA,IACPC,QAAQC,IAAI,sCACZN,MAAKL,OAAOY,UAAU,eAAgB,MAEtCF,QAAQC,IAAI,uCACZN,MAAKL,OAAOY,UAAU,QAG7BC,OAAO,SAAAJ,IAAM,MAAAA,IAAK,IAClBK,UAAU,SAAAL,IAAM,MAAAJ,OAAKN,eAAegB,IAAIN,MACxCO,UAAU,SAAAC,SACPZ,MAAKY,QAAUA,QACfP,QAAQC,IAAIM,YAMxBpB,2BAAAM,UAAAe,oBAAA,SAAoBD,SAEhB,MADAf,MAAKF,OAAOY,UAAU,eAAgBK,QAAQE,MACvC,GAGXtB,2BAAAM,UAAAiB,OAAA,WACIlB,KAAKF,OAAOY,UAAU,MA3E9Bf,2BAAAwB,YAACC,OAAAC,WACGC,SAAU,sBACVC,SAAU,0sCA6BVC,kLAGJC,UAAA,6BAAA9B","file":"article-detail-view.component.js","sourcesContent":["import {Component, OnInit} from \"@angular/core\";\r\nimport {Router, ActivatedRoute, Params} from \"@angular/router\";\r\nimport {Article} from \"./article\";\r\nimport {AuthService} from \"./auth.service\";\r\nimport { ArticleService } from \"./article.service\";\r\nimport 'rxjs/add/operator/mergeMap';\r\nimport 'rxjs/add/operator/map';\r\n\r\n@Component({\r\n    selector: \"article-detail-view\",\r\n    template: `\r\n<div *ngIf=\"article\">\r\n    <h2>\r\n        <a href=\"javascript:void(0)\" (click)=\"onBack()\">&laquo; Back to Home</a>\r\n    </h2>\r\n    <div class=\"article-container\">\r\n        <ul class=\"nav nav-tabs\">\r\n            <li *ngIf=\"authService.isLoggedIn()\" role=\"presentation\">\r\n                <a href=\"javascript:void(0)\" (click)=\"onArticleDetailEdit(article)\">Edit</a>\r\n            </li>\r\n            <li role=\"presentation\" class=\"active\">\r\n                <a href=\"javascript:void(0)\">View</a>\r\n            </li>\r\n        </ul>\r\n        <div class=\"panel panel-default\">\r\n            <div class=\"panel-body\">\r\n                <div class=\"article-image-panel\">\r\n                    <img src=\"/img/article-image-sample.png\" alt=\"{{article.Title}}\" />\r\n                    <div class=\"caption\">Sample image with caption.</div>\r\n                </div>\r\n                <h3>{{article.Title}}</h3>\r\n                <p>{{article.Description}}</p>\r\n                <p>{{article.Text}}</p>\r\n                <p *ngFor=\"let eRelationship of article.EntityRelationships\">{{eRelationship.Entity1Name}} {{eRelationship.RelationshipDescription}} {{eRelationship.Entity2Name}}</p>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n    `,\r\n    styles: []\r\n})\r\n\r\nexport class ArticleDetailViewComponent {\r\n    article: Article;\r\n\r\n    constructor(\r\n        private authService: AuthService,\r\n        private articleService: ArticleService,\r\n        private router: Router,\r\n        private activatedRoute: ActivatedRoute) { }\r\n\r\n    ngOnInit() {\r\n        var id;\r\n        this.activatedRoute.params\r\n            .map(params => +params['id'])\r\n            .do(id => {\r\n                console.log(id);\r\n                if (id) {\r\n                    console.log(id);\r\n                } else if (id === 0) {\r\n                    console.log(\"id is 0: switching to edit mode...\");\r\n                    this.router.navigate([\"article/edit\", 0]);\r\n                } else {\r\n                    console.log(\"Invalid id: routing back to home...\");\r\n                    this.router.navigate([\"\"]);\r\n                }\r\n            })\r\n            .filter(id => id > 0)\r\n            .switchMap(id => this.articleService.get(id))\r\n            .subscribe(article => {\r\n                this.article = article;\r\n                console.log(article);\r\n\r\n            });\r\n\r\n    }\r\n\r\n    onArticleDetailEdit(article: Article) {\r\n        this.router.navigate([\"article/edit\", article.Id]);\r\n        return false;\r\n    }\r\n\r\n    onBack() {\r\n        this.router.navigate(['']);\r\n    }\r\n}\r\n"]}